<div class="container">
  <div class="row justify-content-center mt-3">
    <mat-spinner *ngIf="loading" mode="indeterminate"></mat-spinner>
  </div>

  <mat-card *ngIf="!loading">
    <mat-card-content>
      <div class="row">
        <div *ngIf="currpost.imageURL" class="col-sm-12 col-lg-6 col-md-6 col-xl-6">
          <img class="w-100" [src]="currpost.imageURL" alt="">
        </div>
        <div class="col-sm-12 col-lg-6 col-md-6 col-xl-6">
          <mat-card-header>
            <img class="pointer"  [routerLink]="['/profile',currpost.owner.uid]"
                 mat-card-avatar src="{{currpost.owner.profileURL}}"
                 alt="">
            <mat-card-title class="pointer" [routerLink]="['/profile',currpost.owner.uid]">
              <h4>{{currpost.owner.name}}</h4>
            </mat-card-title>
            <span class="flex-fill"></span>
            <mat-icon>more_vert</mat-icon>
          </mat-card-header>
          <mat-card-content class="mt-3">
            <h6>{{currpost.content}}</h6>
          </mat-card-content>
          <mat-card-actions>
            <div class="row justify-content-around">
              <button (click)="thumbUp(currpost)" mat-button>
                <mat-icon [matBadge]="currpost.likes" matBadgeColor="primary" class="pointer">thumb_up</mat-icon>
              </button>
              <button (click)="sharestat(currpost)" mat-button>
                <mat-icon class="pointer">share</mat-icon>
              </button>
            </div>
          </mat-card-actions>
        </div>
      </div>
    </mat-card-content>
    <mat-card-footer>
      <div>
        <!--        Comments List-->
        <mat-list>
          <h3 mat-subheader> {{currpost.commentsCount}} Comments</h3>
          <mat-list-item *ngFor="let c of currpost.comments">
            <img mat-list-icon [src]="c.owner.profileURL" alt="">
            <h5 mat-line>{{c.comment}}</h5>
            <p class="text-info small" mat-line>{{c.owner.name}}</p>
            <span class="flex-fill"></span>
            <mat-icon [matMenuTriggerFor]="comntDelete" *ngIf="c.owner.uid==uid()">more_vert</mat-icon>
            <mat-menu #comntDelete="matMenu">
              <button (click)="deleteComment(currpost,c)" mat-menu-item>
                Delete Comment
              </button>
            </mat-menu>
          </mat-list-item>
        </mat-list>
        <!--Comment Field-->
        <mat-form-field class="w-100 p-2" appearance="outline">
          <mat-label>Comment..</mat-label>
          <input #commentelement (keyup.enter)="comment(currpost,commentelement)" matInput type="text">
          <mat-icon (click)="comment(currpost,commentelement)" class="pointer" matSuffix>send</mat-icon>
        </mat-form-field>
      </div>
    </mat-card-footer>
  </mat-card>
</div>
